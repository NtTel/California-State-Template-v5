---
title: Contact us form
layout: page.njk
permalink: "contact-us-form.html"
---

<h1 class="mt-lg-0">Contact us form</h1>

<form autocomplete="on" method="POST" id="ContactUsForm">
  <fieldset>
    <legend>What would you like to say?</legend>
    <label class="form-control-label" for="InputName"
      ><span class="required-label">*</span> Full Name</label
    >
    <input
      type="text"
      class="form-control"
      id="InputName"
      name="Name"
      autocomplete="name"
      required
    />
    <div class="invalid-feedback d-block">This field is required</div>
    <br />
    <label class="form-control-label" for="InputEmail">Email Address</label>
    <input
      type="email"
      class="form-control"
      id="InputEmail"
      name="Email"
      autocomplete="email"
    />
    <br />
    <label class="form-control-label" for="InputRole">Your Role</label>
    <input
      type="text"
      class="form-control"
      id="InputRole"
      name="Role"
      autocomplete="organization-title"
      list="roleSuggestions"
    />
    <datalist id="roleSuggestions">
      <option>Analytics</option>
      <option>Content</option>
      <option>Design</option>
      <option>Development</option>
      <option>Product</option>
      <option>Program</option>
      <option>Research</option>
  </datalist>

    <br />
    <label class="form-control-label" for="InputDepartment"
      >Your Department</label
    >
    <input
      type="text"
      class="form-control"
      id="InputDepartment"
      name="Department"
      autocomplete="organization"
    />
    <br />
    <label class="form-control-label" for="InputComments"
      ><span class="required-label">*</span> Your Comment</label
    >
    <textarea
      id="InputComments"
      class="form-control"
      rows="5"
      cols="80"
      name="Comments"
      required
    ></textarea>
    <div class="invalid-feedback d-block">This field is required</div>

    <input type="hidden" name="Form Source" value="contact-us.html" />
    <input
      type="submit"
      value="Submit Contact Form"
      class="btn btn-outline-primary"
    />
  </fieldset>
</form>

<div class="modal fade" id="modalResponse" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="h4 modal-title">Problem with submission.</h3>
        <button
          type="button"
          class="close btn btn-secondary"
          data-bs-dismiss="modal"
        >
          <span class="sr-only">Close modal</span
          ><span class="ca-gov-icon-close-mark" aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        There was a problem with your submission. Please wait a moment and try
        again.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<button
  type="button"
  id="btnModal"
  class="btn btn-default btn-lg m-t-lg hidden"
  data-bs-toggle="modal"
  data-bs-target="#modalResponse"
>
  blank
</button>
<a href="contact-us-thankyou.html" id="urlThankyou" class="hidden">thanks</a>

<script>
  const url =
    "https://fa-cdt-pub-migr-betaws-w-p-001.azurewebsites.net/api/air-table";
  const formId = "ContactUsForm";
  const modalButtonId = "btnModal";
  const urlThankyouId = "urlThankyou";

  {
    const sampleForm = /** @type {HTMLFormElement} */ (
      document.getElementById(formId)
    );
    if (sampleForm) {
      sampleForm.action = "";
      sampleForm.addEventListener("submit", submitForm);
    } else {
      console.error("No form on page.");
    }
  }
  ({});

  async function submitForm(/** @type { SubmitEvent } */ e) {
    e.preventDefault();

    document
      .querySelectorAll("form input[type=submit]")
      .forEach((/** @type { HTMLButtonElement } */ btnSubmit) => {
        btnSubmit.disabled = true;
        setTimeout(() => (btnSubmit.disabled = false), 5000);
      });

    const form = /** @type { HTMLFormElement } */ (e.target);

    const jsonFormData = {};
    for (const pair of new FormData(form)) {
      jsonFormData[pair[0]] = pair[1];
    }

    /** @type { RequestInit } */
    const request = {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(jsonFormData),
    };

    fetch(url, request)
      .then((response) => {
        if (response.ok) {
          return response.json();
        }
        console.error(response);

        throw new Error(
          `Can't submit - ${response.status}:${response.statusText}`
        );
      })
      .then((responseJson) => {
        console.log(responseJson);

        /** @type { HTMLAnchorElement } */
        const lnk = document.getElementById(urlThankyouId);
        lnk.click();
      })
      .catch((error) => {
        console.error(error);

        /** @type { HTMLButtonElement } */
        const modalButton = document.getElementById(modalButtonId);
        modalButton.click();
      });
  }
</script>
